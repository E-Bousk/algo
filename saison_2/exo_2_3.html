<!DOCTYPE HTML>
<html>
<head>
	<title>Exercice 2.3</title>
	<?php include "../commun/head_with_prompt.html" ?>

	<style type="text/css">
		.txt_pseudocode {
			width: 100%;
			height: 276px;
		}
	</style>
</head>

<body>
    <div id="page">
		<?php include "../commun/video.html" ?>

        <!--header start -->
        <header>
			<?php include "../commun/header.html" ?>
        </header>
        <!--header end-->
		
		<main>
			<!--nav start -->
			<nav>
				<?php include "../commun/nav.html" ?>
			</nav>
			<!--nav end-->

			<!--aside start -->
			<aside>
			</aside>
			<!--aside end-->

			<!--section start -->
			<section>
				<div>
					<div class="type-wrap">
						<div id="typed-strings">
							<h2>Exercice 2.3</h2>
						</div>
						<span id="typed" style="white-space:pre;"></span>
					</div>
					<h3>Enoncé</h3>
					<p class="p_blue">&laquo; Ecrire un programme qui lit le prix HT d’un article, le nombre d’articles et le taux de TVA, et qui fournit le
						prix total TTC correspondant. Faire en sorte que des libellés apparaissent clairement. &raquo;</p>
				</div>
				<div class="titre_et_boutton">
					<h3>PSEUDO-CODE</h3>
                    <button onClick="showCorrection('correction')">CORRECTION</button>
                </div>
                <div class="pseudo_et_correction">
					<textarea class="txt_pseudocode">
ALGORITHME Exo_2_3
variables iPrixArticle, iNombreArticle, iTauxTVA, iTTC en entier
DEBUT
Ecrire "Entrez le prix de l'article en €"
Lire iPrixArticle
Ecrire "Entrez le nombre d'article"
Lire iNombreArticle
Ecrire "Entrez le montant de la TVA en %"
Lire iTauxTVA
iTTC &lt;- iNombreArticle * iPrixArticle * (1+ iTauxTVA/100)
Ecrire "le prix TTC est de : " + iTTC + " €"
FIN
					</textarea>
					<textarea id ="to_hide" class="txt_correction">
ALGORITHME Exo_2_3
	Variables iNb, iPht, iTtva, iPttc en Numerique
Debut
	Ecrire "Entrez le prix hors taxes :"
	Lire iPht
	Ecrire "Entrez le nombre d’articles :"
	Lire iNb
	Ecrire "Entrez le taux de TVA :"
	Lire iTtva
	iPttc ← iNb * iPht * (1 + iTtva)
	Ecrire "Le prix toutes taxes est : ", iPttc
Fin
		
Là aussi, on pourrait squeezer une variable et une ligne en écrivant directement. :

Ecrire "Le prix toutes taxes est : ", iNb * iPht * (1 + iTtva)
					</textarea>
				</div>
				<div>
					<div class="choix_langage">
						<div><button class="btn_choix btn_choix_1" onClick="showCode('div_jsprompt', 'btn_jsprompt', 'img_jsprompt')"></button></div>
						<div><button class="btn_choix btn_choix_2" onClick="showCode('div_jsform', 'btn_jsform', 'img_jsform')"></button></div>
						<div><button class="btn_choix btn_choix_3" onClick="showCode('div_jquery', 'btn_jquery', 'img_jquery')"></button></div>
						<div><button class="btn_choix btn_choix_4" onClick="showCode('div_php', 'btn_php', 'img_php')"></button></div>
						<div><button onClick="showCode('div_jsprompt', 'btn_jsprompt', 'img_jsprompt')">CODE JavaScript <br>(via Prompt)</button></div>
						<div><button onClick="showCode('div_jsform', 'btn_jsform', 'img_jsform')">CODE JavaScript <br>(via Formulaire)</button></div>
						<div><button onClick="showCode('div_jquery', 'btn_jquery', 'img_jquery')">CODE JQuery</button></div>
						<div><button onClick="showCode('div_php', 'btn_php', 'img_php')">CODE PHP</button></div>						
					</div>
					<div id="div_jsprompt">
						<section class="language-markup ">
							<pre class="line-numbers"><code class="language-javascript">// ALGORITHME Exo_2_3 JSPROMPT
function Exo_2_3()
// DEBUT
{
	// VARIABLE iPrixArticle, iNombreArticle, iTauxTVA, iTTC en NUMERIQUE
	var iPrixArticle, iNombreArticle, iTauxTVA;

	// ECRIRE "Entrez le prix de l'article en €"
	// LIRE iPrixArticle
	iPrixArticle= prompt("Entrez le prix de l'article en €");

	// ECRIRE "Entrez le nombre d'article"
	// LIRE iNombreArticle
	iNombreArticle= prompt("Entrez le nombre d'article");

	// ECRIRE "Entrez le montant de la TVA en %"
	// LIRE iTauxTVA
	iTauxTVA= prompt("Entrez le montant de la TVA en %");

	// iCarre= iNombreUtilisateur * iNombreUtilisateur
	iTTC= iPrixArticle * iNombreArticle * (1+ iTauxTVA/100 );

	// ECRIRE "Le prix TTC est de " + iTTC + " €"
	alert("Le montant TTC est de " + iTTC + " €");

// FIN
}                           </code></pre>
						</section>	
					</div>
					<div id="div_jsform">
						<section class="language-markup ">
							<pre class="line-numbers"><code class="language-javascript">// ALGORITHME Exo_2_3 JSFORM
function Exo_2_3_jsform()
// DEBUT
{
	// VARIABLE iPrixArticle, iNombreArticle, iTauxTVA, iTTC en NUMERIQUE
	var iPrixArticle, iNombreArticle, iTauxTVA;

	// ECRIRE "Entrez le prix de l'article en €"
	// LIRE iPrixArticle
	iPrixArticle= document.getElementById("iPrixArticle").value;

	// ECRIRE "Entrez le nombre d'article"
	// LIRE iNombreArticle
	iNombreArticle= document.getElementById("iNombreArticle").value;

	// ECRIRE "Entrez le montant de la TVA en %"
	// LIRE iTauxTVA
	iTauxTVA= document.getElementById("iTauxTVA").value;

	// iCarre= iNombreUtilisateur * iNombreUtilisateur
	iTTC= iPrixArticle * iNombreArticle * (1+ iTauxTVA/100 );

	// ECRIRE "Le prix TTC est de " + iTTC + " €"
	document.getElementById("sp_resultat_code").innerHTML= "Le montant TTC est de " + iTTC + " €";

// FIN
}                           </code></pre>
						</section>	
					</div>

					<div id="div_jquery">
						<section class="language-markup ">
							<pre class="line-numbers"><code class="language-javascript">// ALGORITHME Exo_2_3 JQUERY
function Exo_2_3_jquery()
// DEBUT
{
	// VARIABLE iPrixArticle, iNombreArticle, iTauxTVA, iTTC en NUMERIQUE
	var iPrixArticle, iNombreArticle, iTauxTVA;

	// ECRIRE "Entrez le prix de l'article en €"
	// LIRE iPrixArticle
	iPrixArticle= $("#iPrixArticle").val();

	// ECRIRE "Entrez le nombre d'article"
	// LIRE iNombreArticle
	iNombreArticle= $("#iNombreArticle").val();

	// ECRIRE "Entrez le montant de la TVA en %"
	// LIRE iTauxTVA
	iTauxTVA= $("#iTauxTVA").val();

	// iCarre= iNombreUtilisateur * iNombreUtilisateur
	iTTC= iPrixArticle * iNombreArticle * (1+ iTauxTVA/100 );

	// ECRIRE "Le prix TTC est de " + iTTC + " €"
	$("#sp_resultat_code").html("Le montant TTC est de " + iTTC + " €");

// FIN
}                           </code></pre>
						</section>	
					</div>

					<div id="div_php">
						<section class="language-markup ">
							<pre class="line-numbers"><code class="language-php">// ALGORITHME Exo_2_3 PHP
if ((isset($_POST["iPrixArticle"]) && $_POST["iPrixArticle"] !== "") 
&& (isset($_POST["iNombreArticle"]) && $_POST["iNombreArticle"] !== "") 
&& (isset($_POST["iTauxTVA"]) && $_POST["iTauxTVA"] !== "")
) {
	// indique pas d'erreur
	$array_res[0] = array(
		'error' => 0
	);

	$iPrixArticle= $_POST["iPrixArticle"];
	$iNombreArticle= $_POST["iNombreArticle"];
	$iTauxTVA= $_POST["iTauxTVA"];
	$iTTC= $iPrixArticle * $iNombreArticle * (1+ $iTauxTVA/100 );

	$array_res[1]= array('iTTC' => $iTTC);
	echo json_encode($array_res);
} 
// sinon (s'il manque un(des) champ(s) et/ou pas reçu(s))
else
{
// indique erreur
$array_res[0] = array(
	'error' => 1
);

// renvoie à la page JS le tableau avec erreur=1
echo json_encode ($array_res);
}
/////////////////////////////////////////////////////

FICHIER JS :
// ALGORITHME Exo_2_3 PHP - Appel AJAX
function Exo_2_3_phpAjax()
{

	var datas = 
    {
		iPrixArticle: $("#iPrixArticle").val(),
		iNombreArticle: $("#iNombreArticle").val(),
		iTauxTVA: $("#iTauxTVA").val()
    }

	$.ajax(
	{
		type: "POST", 
		url: "exo_2_3_Ajax.php", 
		async: true, 
		data: datas, 
		dataType: "json", 
		cache: false
	})

	.done(function(result)
	{
        if (result[0]["error"] === 0)
        {
			$("#sp_resultat_code").html("Le montant TTC est de " + result[1]["iTTC"] + " €");
		}
        else if (result[0]["error"] === 1)
        {
			// affiche un message d'erreur
			$("#sp_resultat_code").html("Veuillez saisir un nombre !");
		} 

	})
	
	.fail(function(err) 
	{
		// Affichage d'erreur
		console.log("fail");
		alert("error : " + err.status);
	});
}							</code></pre>
						</section>	
					</div>
				</div>
				
				<div id="div_form_resultat">
					<div class="align_formulaire_resultat">
						<div class="div_formulaire">
							<form action="exo_2_3.php" method="POST" name="formPHP">
								<p>Entrez le prix de l'article en €</p>
								<p><input type="number" name="iPrixArticle" id="iPrixArticle"></p>
								<p>Entrez le nombre d'article</p>
								<p><input type="number" name="iNombreArticle" id="iNombreArticle"></p>
								<p>Entrez le montant de la TVA en %</p>
								<p><input type="number" name="iTauxTVA" id="iTauxTVA"></p>								
								<p>
									<button class="btn_resultat" id="btn_jsprompt" onClick="Exo_2_3(); return false;">Cliquez ici !</button>
									<button class="btn_resultat" id="btn_jsform" onClick="Exo_2_3_jsform(); return false;">Cliquez ici !</button>
									<button class="btn_resultat" id="btn_jquery" onClick="Exo_2_3_jquery(); return false;">Cliquez ici !</button>
									<button class="btn_resultat" id="btn_php"  onClick="Exo_2_3_phpAjax(); return false;">Cliquez ici !</button>
								</p>
							</form>
						</div>
						<div class="div_resultat">
							<p>Résultat :</p>
							<span id="sp_resultat_code"></span>
                            <img class="logo_resultat" id="img_jsprompt" src="../img/logo-javascript.png">
                            <img class="logo_resultat" id="img_jsform" src="../img/logo-javascript.png">
                            <img class="logo_resultat" id="img_jquery" src="../img/logo-jquery.png">
                            <img class="logo_resultat" id="img_php" src="../img/logo-php.png">
						</div>
					</div>	
				</div>
			</section>		
        <!--section end-->
		</main>
        <!--footer start-->
        <footer>
<?php include "../commun/footer.html" ?>
			<script src="../js/saison2.js"></script>
        </footer>
        <!--footer end-->
    </div>

</body>

</html>
